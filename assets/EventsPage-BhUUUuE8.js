const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eventsCache-BfUKmZ-3.js","assets/index-5wZH95oK.js","assets/index-CdNecmSB.css"])))=>i.map(i=>d[i]);
import{a as Lt,g as At,r as n,u as Mt,c as G,k as D,s as ot,b as Zt,d as Wt,B as te,m as zt,v as xe,j as p,p as ee,o as oe,h as Pt,i as st,S as we,ao as Te,ap as Ce,ae as Be,L as Ee,aq as Ie,Q as q,P as gt,I as De,R as Pe,U as Rt,X as Re}from"./index-5wZH95oK.js";import{C as Yt,A as ke}from"./ArrowBack-eZ15nQOk.js";import{K as Le,H as Ae,m as Kt,r as Me,t as _t,d as We,s as ze,T as Ne,E as Fe,y as He,z as $e,A as Xe,G as Oe,B as Ue}from"./EventsTable-CTUFwlbE.js";import{e as re,g as le,d as wt,c as Ve}from"./TextField-CyNIe0j5.js";import"./CheckCircle-dnyFUncK.js";import"./listItemIconClasses-CrPJvG8F.js";function Ye(t){return At("MuiTab",t)}const M=Lt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Ke=t=>{const{classes:e,textColor:l,fullWidth:d,wrapped:s,icon:h,label:S,selected:T,disabled:v}=t,m={root:["root",h&&S&&"labelIcon",`textColor${Zt(l)}`,d&&"fullWidth",s&&"wrapped",T&&"selected",v&&"disabled"],icon:["iconWrapper","icon"]};return Wt(m,Ye,e)},_e=ot(te,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.root,l.label&&l.icon&&e.labelIcon,e[`textColor${Zt(l.textColor)}`],l.fullWidth&&e.fullWidth,l.wrapped&&e.wrapped,{[`& .${M.iconWrapper}`]:e.iconWrapper},{[`& .${M.icon}`]:e.icon}]}})(zt(({theme:t})=>({...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="top",style:{[`& > .${M.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="bottom",style:{[`& > .${M.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="start",style:{[`& > .${M.icon}`]:{marginRight:t.spacing(1)}}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="end",style:{[`& > .${M.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${M.selected}`]:{opacity:1},[`&.${M.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${M.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${M.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${M.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${M.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:t.typography.pxToRem(12)}}]}))),Qt=n.forwardRef(function(e,l){const d=Mt({props:e,name:"MuiTab"}),{className:s,disabled:h=!1,disableFocusRipple:S=!1,fullWidth:T,icon:v,iconPosition:m="top",indicator:B,label:x,onChange:y,onClick:C,onFocus:Y,selected:P,selectionFollowsFocus:E,textColor:J="inherit",value:k,wrapped:j=!1,...R}=d,L={...d,disabled:h,disableFocusRipple:S,selected:P,icon:!!v,iconPosition:m,label:!!x,fullWidth:T,textColor:J,wrapped:j},H=Ke(L),Z=v&&x&&n.isValidElement(v)?n.cloneElement(v,{className:G(H.icon,v.props.className)}):v,$=z=>{!P&&y&&y(z,k),C&&C(z)},W=z=>{E&&!P&&y&&y(z,k),Y&&Y(z)};return D(_e,{focusRipple:!S,className:G(H.root,s),ref:l,role:"tab","aria-selected":P,disabled:h,onClick:$,onFocus:W,ownerState:L,tabIndex:P?0:-1,...R,children:[m==="top"||m==="start"?D(n.Fragment,{children:[Z,x]}):D(n.Fragment,{children:[x,Z]}),B]})});function Qe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function je(t,e,l,d={},s=()=>{}){const{ease:h=Qe,duration:S=300}=d;let T=null;const v=e[t];let m=!1;const B=()=>{m=!0},x=y=>{if(m){s(new Error("Animation cancelled"));return}T===null&&(T=y);const C=Math.min(1,(y-T)/S);if(e[t]=h(C)*(l-v)+v,C>=1){requestAnimationFrame(()=>{s(null)});return}requestAnimationFrame(x)};return v===l?(s(new Error("Element already at target position")),B):(requestAnimationFrame(x),B)}const qe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Ge(t){const{onChange:e,...l}=t,d=n.useRef(),s=n.useRef(null),h=()=>{d.current=s.current.offsetHeight-s.current.clientHeight};return xe(()=>{const S=re(()=>{const v=d.current;h(),v!==d.current&&e(d.current)}),T=le(s.current);return T.addEventListener("resize",S),()=>{S.clear(),T.removeEventListener("resize",S)}},[e]),n.useEffect(()=>{h(),e(d.current)},[e]),p("div",{style:qe,...l,ref:s})}function Je(t){return At("MuiTabScrollButton",t)}const Ze=Lt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),to=t=>{const{classes:e,orientation:l,disabled:d}=t;return Wt({root:["root",l,d&&"disabled"]},Je,e)},eo=ot(te,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.root,l.orientation&&e[l.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Ze.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),oo=n.forwardRef(function(e,l){const d=Mt({props:e,name:"MuiTabScrollButton"}),{className:s,slots:h={},slotProps:S={},direction:T,orientation:v,disabled:m,...B}=d,x=ee(),y={isRtl:x,...d},C=to(y),Y=h.StartScrollButtonIcon??Le,P=h.EndScrollButtonIcon??Ae,E=wt({elementType:Y,externalSlotProps:S.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y}),J=wt({elementType:P,externalSlotProps:S.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y});return p(eo,{component:"div",className:G(C.root,s),ref:l,role:null,ownerState:y,tabIndex:null,...B,style:{...B.style,...v==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${x?-90:90}deg)`}},children:T==="left"?p(Y,{...E}):p(P,{...J})})});function ro(t){return At("MuiTabs",t)}const kt=Lt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),jt=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,qt=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,xt=(t,e,l)=>{let d=!1,s=l(t,e);for(;s;){if(s===t.firstChild){if(d)return;d=!0}const h=s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||h)s=l(t,s);else{s.focus();return}}},lo=t=>{const{vertical:e,fixed:l,hideScrollbar:d,scrollableX:s,scrollableY:h,centered:S,scrollButtonsHideMobile:T,classes:v}=t;return Wt({root:["root",e&&"vertical"],scroller:["scroller",l&&"fixed",d&&"hideScrollbar",s&&"scrollableX",h&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",S&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",T&&"scrollButtonsHideMobile"],scrollableX:[s&&"scrollableX"],hideScrollbar:[d&&"hideScrollbar"]},ro,v)},no=ot("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[{[`& .${kt.scrollButtons}`]:e.scrollButtons},{[`& .${kt.scrollButtons}`]:l.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,l.vertical&&e.vertical]}})(zt(({theme:t})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${kt.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}))),so=ot("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.scroller,l.fixed&&e.fixed,l.hideScrollbar&&e.hideScrollbar,l.scrollableX&&e.scrollableX,l.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:t})=>t.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:t})=>t.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:t})=>t.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:t})=>t.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),ao=ot("div",{name:"MuiTabs",slot:"List",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.list,e.flexContainer,l.vertical&&e.flexContainerVertical,l.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.centered,style:{justifyContent:"center"}}]}),io=ot("span",{name:"MuiTabs",slot:"Indicator"})(zt(({theme:t})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),co=ot(Ge)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Gt={},uo=n.forwardRef(function(e,l){const d=Mt({props:e,name:"MuiTabs"}),s=oe(),h=ee(),{"aria-label":S,"aria-labelledby":T,action:v,centered:m=!1,children:B,className:x,component:y="div",allowScrollButtonsMobile:C=!1,indicatorColor:Y="primary",onChange:P,orientation:E="horizontal",ScrollButtonComponent:J,scrollButtons:k="auto",selectionFollowsFocus:j,slots:R={},slotProps:L={},TabIndicatorProps:H={},TabScrollButtonProps:Z={},textColor:$="primary",value:W,variant:z="standard",visibleScrollbar:at=!1,...ft}=d,f=z==="scrollable",I=E==="vertical",N=I?"scrollTop":"scrollLeft",A=I?"top":"left",rt=I?"bottom":"right",it=I?"clientHeight":"clientWidth",K=I?"height":"width",F={...d,component:y,allowScrollButtonsMobile:C,indicatorColor:Y,orientation:E,vertical:I,scrollButtons:k,textColor:$,variant:z,visibleScrollbar:at,fixed:!f,hideScrollbar:f&&!at,scrollableX:f&&!I,scrollableY:f&&I,centered:m&&!f,scrollButtonsHideMobile:!C},X=lo(F),Tt=wt({elementType:R.StartScrollButtonIcon,externalSlotProps:L.startScrollButtonIcon,ownerState:F}),ct=wt({elementType:R.EndScrollButtonIcon,externalSlotProps:L.endScrollButtonIcon,ownerState:F}),[ut,Ct]=n.useState(!1),[_,ht]=n.useState(Gt),[bt,Bt]=n.useState(!1),[vt,i]=n.useState(!1),[a,w]=n.useState(!1),[b,O]=n.useState({overflow:"hidden",scrollbarWidth:0}),lt=new Map,U=n.useRef(null),tt=n.useRef(null),nt={slots:R,slotProps:{indicator:H,scrollButton:Z,...L}},Nt=()=>{const o=U.current;let r;if(o){const u=o.getBoundingClientRect();r={clientWidth:o.clientWidth,scrollLeft:o.scrollLeft,scrollTop:o.scrollTop,scrollWidth:o.scrollWidth,top:u.top,bottom:u.bottom,left:u.left,right:u.right}}let c;if(o&&W!==!1){const u=tt.current.children;if(u.length>0){const g=u[lt.get(W)];c=g?g.getBoundingClientRect():null}}return{tabsMeta:r,tabMeta:c}},dt=Pt(()=>{const{tabsMeta:o,tabMeta:r}=Nt();let c=0,u;I?(u="top",r&&o&&(c=r.top-o.top+o.scrollTop)):(u=h?"right":"left",r&&o&&(c=(h?-1:1)*(r[u]-o[u]+o.scrollLeft)));const g={[u]:c,[K]:r?r[K]:0};if(typeof _[u]!="number"||typeof _[K]!="number")ht(g);else{const V=Math.abs(_[u]-g[u]),et=Math.abs(_[K]-g[K]);(V>=1||et>=1)&&ht(g)}}),Et=(o,{animation:r=!0}={})=>{r?je(N,U.current,o,{duration:s.transitions.duration.standard}):U.current[N]=o},Ft=o=>{let r=U.current[N];I?r+=o:r+=o*(h?-1:1),Et(r)},Ht=()=>{const o=U.current[it];let r=0;const c=Array.from(tt.current.children);for(let u=0;u<c.length;u+=1){const g=c[u];if(r+g[it]>o){u===0&&(r=o);break}r+=g[it]}return r},ne=()=>{Ft(-1*Ht())},se=()=>{Ft(Ht())},[ae,{onChange:St,...ie}]=st("scrollbar",{className:G(X.scrollableX,X.hideScrollbar),elementType:co,shouldForwardComponentProp:!0,externalForwardedProps:nt,ownerState:F}),ce=n.useCallback(o=>{St==null||St(o),O({overflow:null,scrollbarWidth:o})},[St]),[$t,Xt]=st("scrollButtons",{className:G(X.scrollButtons,Z.className),elementType:oo,externalForwardedProps:nt,ownerState:F,additionalProps:{orientation:E,slots:{StartScrollButtonIcon:R.startScrollButtonIcon||R.StartScrollButtonIcon,EndScrollButtonIcon:R.endScrollButtonIcon||R.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Tt,endScrollButtonIcon:ct}}}),ue=()=>{const o={};o.scrollbarSizeListener=f?p(ae,{...ie,onChange:ce}):null;const c=f&&(k==="auto"&&(bt||vt)||k===!0);return o.scrollButtonStart=c?p($t,{direction:h?"right":"left",onClick:ne,disabled:!bt,...Xt}):null,o.scrollButtonEnd=c?p($t,{direction:h?"left":"right",onClick:se,disabled:!vt,...Xt}):null,o},Ot=Pt(o=>{const{tabsMeta:r,tabMeta:c}=Nt();if(!(!c||!r)){if(c[A]<r[A]){const u=r[N]+(c[A]-r[A]);Et(u,{animation:o})}else if(c[rt]>r[rt]){const u=r[N]+(c[rt]-r[rt]);Et(u,{animation:o})}}}),mt=Pt(()=>{f&&k!==!1&&w(!a)});n.useEffect(()=>{const o=re(()=>{U.current&&dt()});let r;const c=V=>{V.forEach(et=>{et.removedNodes.forEach(pt=>{r==null||r.unobserve(pt)}),et.addedNodes.forEach(pt=>{r==null||r.observe(pt)})}),o(),mt()},u=le(U.current);u.addEventListener("resize",o);let g;return typeof ResizeObserver<"u"&&(r=new ResizeObserver(o),Array.from(tt.current.children).forEach(V=>{r.observe(V)})),typeof MutationObserver<"u"&&(g=new MutationObserver(c),g.observe(tt.current,{childList:!0})),()=>{o.clear(),u.removeEventListener("resize",o),g==null||g.disconnect(),r==null||r.disconnect()}},[dt,mt]),n.useEffect(()=>{const o=Array.from(tt.current.children),r=o.length;if(typeof IntersectionObserver<"u"&&r>0&&f&&k!==!1){const c=o[0],u=o[r-1],g={root:U.current,threshold:.99},V=Dt=>{Bt(!Dt[0].isIntersecting)},et=new IntersectionObserver(V,g);et.observe(c);const pt=Dt=>{i(!Dt[0].isIntersecting)},Vt=new IntersectionObserver(pt,g);return Vt.observe(u),()=>{et.disconnect(),Vt.disconnect()}}},[f,k,a,B==null?void 0:B.length]),n.useEffect(()=>{Ct(!0)},[]),n.useEffect(()=>{dt()}),n.useEffect(()=>{Ot(Gt!==_)},[Ot,_]),n.useImperativeHandle(v,()=>({updateIndicator:dt,updateScrollButtons:mt}),[dt,mt]);const[de,pe]=st("indicator",{className:G(X.indicator,H.className),elementType:io,externalForwardedProps:nt,ownerState:F,additionalProps:{style:_}}),Ut=p(de,{...pe});let yt=0;const fe=n.Children.map(B,o=>{if(!n.isValidElement(o))return null;const r=o.props.value===void 0?yt:o.props.value;lt.set(r,yt);const c=r===W;return yt+=1,n.cloneElement(o,{fullWidth:z==="fullWidth",indicator:c&&!ut&&Ut,selected:c,selectionFollowsFocus:j,onChange:P,textColor:$,value:r,...yt===1&&W===!1&&!o.props.tabIndex?{tabIndex:0}:{}})}),he=o=>{if(o.altKey||o.shiftKey||o.ctrlKey||o.metaKey)return;const r=tt.current,c=Ve(r).activeElement;if(c.getAttribute("role")!=="tab")return;let g=E==="horizontal"?"ArrowLeft":"ArrowUp",V=E==="horizontal"?"ArrowRight":"ArrowDown";switch(E==="horizontal"&&h&&(g="ArrowRight",V="ArrowLeft"),o.key){case g:o.preventDefault(),xt(r,c,qt);break;case V:o.preventDefault(),xt(r,c,jt);break;case"Home":o.preventDefault(),xt(r,null,jt);break;case"End":o.preventDefault(),xt(r,null,qt);break}},It=ue(),[be,ve]=st("root",{ref:l,className:G(X.root,x),elementType:no,externalForwardedProps:{...nt,...ft,component:y},ownerState:F}),[Se,me]=st("scroller",{ref:U,className:X.scroller,elementType:so,externalForwardedProps:nt,ownerState:F,additionalProps:{style:{overflow:b.overflow,[I?`margin${h?"Left":"Right"}`:"marginBottom"]:at?void 0:-b.scrollbarWidth}}}),[ye,ge]=st("list",{ref:tt,className:G(X.list,X.flexContainer),elementType:ao,externalForwardedProps:nt,ownerState:F,getSlotProps:o=>({...o,onKeyDown:r=>{var c;he(r),(c=o.onKeyDown)==null||c.call(o,r)}})});return D(be,{...ve,children:[It.scrollButtonStart,It.scrollbarSizeListener,D(Se,{...me,children:[p(ye,{"aria-label":S,"aria-labelledby":T,"aria-orientation":E==="vertical"?"vertical":null,role:"tablist",...ge,children:fe}),ut&&Ut]}),It.scrollButtonEnd]})}),Q={TABLE:"table",TIMELINE:"timeline"},Jt=365,po=we.forwardRef(({embedded:t=!1,onEventsUpdate:e,hideBackButton:l=!1,autoScrollToNextKey:d=null,compactMode:s=!1},h)=>{const S=oe(),T=Kt(S.breakpoints.down("sm"));Kt(S.breakpoints.up("md"));const v=Te(),[m,B]=Ce(),{eventFilters:x,newsSource:y,selectedTimezone:C}=Be(),{user:Y}=Ee(),P=n.useCallback((i,a)=>{if(!a||a.trim()==="")return i;const w=a.toLowerCase().trim();return i.filter(b=>!!((b.name||b.Name||b.title||b.Title||"").toLowerCase().includes(w)||(b.currency||b.Currency||"").toLowerCase().includes(w)||(b.description||b.Description||b.summary||b.Summary||"").toLowerCase().includes(w)))},[]),E=n.useCallback(()=>{const{year:i,month:a,day:w}=Me(C),b=_t(C,i,a,w),O=_t(C,i,a,w,{endOfDay:!0});return{startDate:b,endDate:O}},[C]),[J,k]=n.useState(m.get("view")||Q.TIMELINE),[j,R]=n.useState([]),[L,H]=n.useState(!0),[Z,$]=n.useState(null),[W,z]=n.useState(null),[at,ft]=n.useState(0),[f,I]=n.useState(()=>{const i=m.get("startDate"),a=m.get("endDate");return{startDate:i?new Date(i):x.startDate||null,endDate:a?new Date(a):x.endDate||null,impacts:x.impacts||[],eventTypes:x.eventTypes||[],currencies:x.currencies||[],searchQuery:x.searchQuery||""}}),N=n.useMemo(()=>P(j,f.searchQuery),[j,f.searchQuery,P]);n.useEffect(()=>{const i=m.get("view");i&&[Q.TABLE,Q.TIMELINE].includes(i)&&k(i)},[m]),n.useEffect(()=>{if(!f.startDate||!f.endDate){const{startDate:i,endDate:a}=E(),w={...f,startDate:i,endDate:a};I(w),A(w)}else A()},[]),n.useEffect(()=>{f.startDate&&f.endDate&&A()},[y]);const A=n.useCallback(async(i=null)=>{const a=i||f;if(!a.startDate||!a.endDate){H(!1),$("Please select a date range to view events.");return}const w=Math.ceil((a.endDate-a.startDate)/(1e3*60*60*24));if(w>Jt){$(`Date range cannot exceed ${Jt} days (1 year). Current range: ${w} days.`),H(!1);return}H(!0),$(null);try{const b=await We(a.startDate,a.endDate,{source:y,impacts:a.impacts,eventTypes:a.eventTypes,currencies:a.currencies});if(b.success){const O=ze(b.data),lt=new Date;R(O),z(lt),ft(O.length),e&&e(O.length,lt)}else console.error("❌ [EventsPage] Failed to load events:",b.error),$(b.error||"Failed to load events"),R([])}catch(b){console.error("❌ Error fetching events:",b),$(b.message||"An unexpected error occurred"),R([])}finally{H(!1)}},[f,y]),rt=n.useCallback(i=>{if(I(i),!t){const a=new URLSearchParams(m);i.startDate&&a.set("startDate",i.startDate.toISOString()),i.endDate&&a.set("endDate",i.endDate.toISOString()),B(a,{replace:!0})}},[t,m,B]),it=n.useCallback(i=>{A(i)},[A]),K=n.useCallback(async()=>{const{invalidateCache:i}=await Ie(async()=>{const{invalidateCache:O}=await import("./eventsCache-BfUKmZ-3.js");return{invalidateCache:O}},__vite__mapDeps([0,1,2]));i(y);const{startDate:a,endDate:w}=E(),b={...f,startDate:a,endDate:w};I(b),A(b)},[E,A,f,y]),F=n.useCallback(i=>{ft(i),e&&e(i,W||new Date)},[e,W]);n.useImperativeHandle(h,()=>({handleRefresh:K}),[K]);const X=n.useCallback((i,a)=>{if(k(a),!t){const w=new URLSearchParams(m);w.set("view",a),B(w,{replace:!0})}},[t,m,B]),Tt=n.useCallback(()=>{v("/")},[v]),ct=t?Q.TIMELINE:J,ut=ct===Q.TIMELINE&&at||N.length,Ct=s?{xs:1.25,sm:1.75}:{xs:2,sm:3},_={},ht=s?0:"auto",bt="auto",Bt=s?"var(--t2t-vv-height, 100dvh)":"none",vt=s?"auto":"visible";return D(q,{sx:{minHeight:t?"auto":"var(--t2t-vv-height, 100dvh)",height:"auto",bgcolor:"background.default",pt:t?{xs:1.5,sm:2}:0,pb:t?0:4,display:t?"flex":"block",flexDirection:t?"column":"initial",overflow:t?"hidden":"visible"},children:[!t&&p(gt,{elevation:0,sx:{bgcolor:"primary.main",color:"primary.contrastText",borderRadius:0,borderBottom:`4px solid ${S.palette.primary.dark}`,..._},children:p(Yt,{maxWidth:"xl",children:p(q,{sx:{display:"flex",flexDirection:"column",gap:1.1,py:Ct},children:D(q,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},gap:1.5,flexWrap:"wrap"},children:[!l&&p(Ne,{title:"Back to Clock",placement:"bottom",children:p(De,{onClick:Tt,sx:{color:"primary.contrastText","&:hover":{bgcolor:Pe("#fff",.1)}},children:p(ke,{})})}),D(q,{sx:{flex:1,minWidth:0},children:[p(Rt,{variant:"h4",sx:{fontWeight:800,fontSize:s?{xs:"1.35rem",sm:"1.6rem"}:{xs:"1.6rem",sm:"2rem"},letterSpacing:.2},children:"Economic Events"}),D(q,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",mt:.5},children:[!L&&ut>0&&D(Rt,{variant:"subtitle1",sx:{fontWeight:700,fontSize:{xs:"1rem",sm:"1.05rem"}},children:[ut.toLocaleString()," Events"]}),W&&D(Rt,{variant:"caption",sx:{opacity:.9,fontSize:s?{xs:"0.75rem",sm:"0.82rem"}:{xs:"0.78rem",sm:"0.85rem"}},children:["Updated: ",W.toLocaleString()]})]})]})]})})})}),D(q,{component:t?"div":Yt,...!t&&{maxWidth:"xl"},sx:{mt:t?0:s?1.5:3,px:t?{xs:1.5,sm:2}:s?{xs:1,sm:1.5}:0,pb:t?2:0,flex:t?1:"initial",overflow:t?"auto":"visible",display:"flex",flexDirection:"column",gap:t||s?1.5:3,position:"relative"},children:[p(gt,{elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:s?0:2,flexShrink:0,position:s?"sticky":"static",top:ht,zIndex:s?1180:"auto",bgcolor:"background.paper",maxHeight:Bt,overflow:vt,boxShadow:s?S.shadows[3]:"none",width:t?"100%":s?"100vw":"auto",maxWidth:t?"100%":s?"100vw":"none",ml:s?"calc(50% - 50vw)":0,mr:s?"calc(50% - 50vw)":0},children:p(Fe,{filters:f,onFiltersChange:rt,onApply:it,loading:L,timezone:C,newsSource:y,actionOffset:t?Y?56:12:0})}),!t&&p(gt,{elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:2,overflow:"hidden",flexShrink:0,position:"static",top:bt,zIndex:"auto",bgcolor:"background.paper"},children:D(uo,{value:J,onChange:X,variant:T?"fullWidth":"standard",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:{xs:56,sm:48},fontSize:{xs:"0.875rem",sm:"0.9375rem"},fontWeight:600,textTransform:"none"}},children:[p(Qt,{value:Q.TIMELINE,label:"Timeline",icon:p(He,{}),iconPosition:"start"}),p(Qt,{value:Q.TABLE,label:"Table",icon:p($e,{}),iconPosition:"start"})]})}),D(q,{sx:{flex:t?1:"initial",overflow:t?"hidden":"visible",display:"flex",flexDirection:"column",minHeight:t?0:"auto"},children:[!L&&f.searchQuery&&N.length===0&&j.length>0&&D(Re,{severity:"info",sx:{mb:2,borderRadius:2},children:[p(Xe,{children:"No matches found"}),'No events match your search "',f.searchQuery,'". Try adjusting your search terms or clearing the search to see all filtered events.']}),ct===Q.TIMELINE&&p(gt,{elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:2,overflow:t?"hidden":"auto",flex:t?1:"initial",display:t?"flex":"block",flexDirection:"column"},children:p(Oe,{events:N,loading:L,timezone:C,onVisibleCountChange:F,autoScrollToNextKey:d,searchQuery:f.searchQuery})}),!t&&ct===Q.TABLE&&p(q,{sx:{flex:t?1:"initial",overflow:t?"hidden":"visible",display:t?"flex":"block",flexDirection:"column"},children:p(Ue,{events:N,contextEvents:j,loading:L,error:Z,timezone:C,onRefresh:K,autoScrollToNextKey:d,searchQuery:f.searchQuery})})]})]})]})});po.displayName="EventsPage";export{po as default};
