const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eventsCache-KuEBt7DE.js","assets/index-C7hvWskH.js","assets/index-CdNecmSB.css"])))=>i.map(i=>d[i]);
import{a as kt,g as Rt,r as s,u as Lt,h as j,q as R,s as rt,l as Jt,i as At,B as Zt,m as Mt,y as ye,j as p,w as te,b as ee,p as It,f as at,Y as we,as as Te,at as Ce,ai as Be,Q as Ee,au as Ie,V as q,P as xt,I as De,W as Pe,X as Dt}from"./index-C7hvWskH.js";import{C as Vt,A as ke}from"./ArrowBack-Bmia9oCF.js";import{K as Re,x as Le,h as Yt,m as Ae,n as Kt,a as Me,s as We,T as ze,E as Ne,p as Fe,q as $e,w as He,v as Xe}from"./EventsTable-nOufPxrZ.js";import{k as oe,l as re,d as yt,c as Oe}from"./Select-DTsFbmKp.js";import"./CheckCircle-40o3wHIf.js";import"./listItemIconClasses--Fv7Npdf.js";function Ue(t){return Rt("MuiTab",t)}const M=kt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),Ve=t=>{const{classes:e,textColor:l,fullWidth:d,wrapped:n,icon:f,label:h,selected:g,disabled:b}=t,v={root:["root",f&&h&&"labelIcon",`textColor${Jt(l)}`,d&&"fullWidth",n&&"wrapped",g&&"selected",b&&"disabled"],icon:["iconWrapper","icon"]};return At(v,Ue,e)},Ye=rt(Zt,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.root,l.label&&l.icon&&e.labelIcon,e[`textColor${Jt(l.textColor)}`],l.fullWidth&&e.fullWidth,l.wrapped&&e.wrapped,{[`& .${M.iconWrapper}`]:e.iconWrapper},{[`& .${M.icon}`]:e.icon}]}})(Mt(({theme:t})=>({...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:e})=>e.label&&(e.iconPosition==="top"||e.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:e})=>e.label&&e.iconPosition!=="top"&&e.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:e})=>e.icon&&e.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="top",style:{[`& > .${M.icon}`]:{marginBottom:6}}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="bottom",style:{[`& > .${M.icon}`]:{marginTop:6}}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="start",style:{[`& > .${M.icon}`]:{marginRight:t.spacing(1)}}},{props:({ownerState:e,iconPosition:l})=>e.icon&&e.label&&l==="end",style:{[`& > .${M.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${M.selected}`]:{opacity:1},[`&.${M.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${M.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${M.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${M.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${M.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:({ownerState:e})=>e.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:e})=>e.wrapped,style:{fontSize:t.typography.pxToRem(12)}}]}))),_t=s.forwardRef(function(e,l){const d=Lt({props:e,name:"MuiTab"}),{className:n,disabled:f=!1,disableFocusRipple:h=!1,fullWidth:g,icon:b,iconPosition:v="top",indicator:T,label:y,onChange:S,onClick:w,onFocus:H,selected:E,selectionFollowsFocus:I,textColor:G="inherit",value:D,wrapped:Q=!1,...P}=d,W={...d,disabled:f,disableFocusRipple:h,selected:E,icon:!!b,iconPosition:v,label:!!y,fullWidth:g,textColor:G,wrapped:Q},J=Ve(W),z=b&&y&&s.isValidElement(b)?s.cloneElement(b,{className:j(J.icon,b.props.className)}):b,X=N=>{!E&&S&&S(N,D),w&&w(N)},K=N=>{I&&!E&&S&&S(N,D),H&&H(N)};return R(Ye,{focusRipple:!h,className:j(J.root,n),ref:l,role:"tab","aria-selected":E,disabled:f,onClick:X,onFocus:K,ownerState:W,tabIndex:E?0:-1,...P,children:[v==="top"||v==="start"?R(s.Fragment,{children:[z,y]}):R(s.Fragment,{children:[y,z]}),T]})});function Ke(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function _e(t,e,l,d={},n=()=>{}){const{ease:f=Ke,duration:h=300}=d;let g=null;const b=e[t];let v=!1;const T=()=>{v=!0},y=S=>{if(v){n(new Error("Animation cancelled"));return}g===null&&(g=S);const w=Math.min(1,(S-g)/h);if(e[t]=f(w)*(l-b)+b,w>=1){requestAnimationFrame(()=>{n(null)});return}requestAnimationFrame(y)};return b===l?(n(new Error("Element already at target position")),T):(requestAnimationFrame(y),T)}const qe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function je(t){const{onChange:e,...l}=t,d=s.useRef(),n=s.useRef(null),f=()=>{d.current=n.current.offsetHeight-n.current.clientHeight};return ye(()=>{const h=oe(()=>{const b=d.current;f(),b!==d.current&&e(d.current)}),g=re(n.current);return g.addEventListener("resize",h),()=>{h.clear(),g.removeEventListener("resize",h)}},[e]),s.useEffect(()=>{f(),e(d.current)},[e]),p("div",{style:qe,...l,ref:n})}function Ge(t){return Rt("MuiTabScrollButton",t)}const Qe=kt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Je=t=>{const{classes:e,orientation:l,disabled:d}=t;return At({root:["root",l,d&&"disabled"]},Ge,e)},Ze=rt(Zt,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.root,l.orientation&&e[l.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Qe.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),to=s.forwardRef(function(e,l){const d=Lt({props:e,name:"MuiTabScrollButton"}),{className:n,slots:f={},slotProps:h={},direction:g,orientation:b,disabled:v,...T}=d,y=te(),S={isRtl:y,...d},w=Je(S),H=f.StartScrollButtonIcon??Re,E=f.EndScrollButtonIcon??Le,I=yt({elementType:H,externalSlotProps:h.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:S}),G=yt({elementType:E,externalSlotProps:h.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:S});return p(Ze,{component:"div",className:j(w.root,n),ref:l,role:null,ownerState:S,tabIndex:null,...T,style:{...T.style,...b==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${y?-90:90}deg)`}},children:g==="left"?p(H,{...I}):p(E,{...G})})});function eo(t){return Rt("MuiTabs",t)}const Pt=kt("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),qt=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,jt=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,gt=(t,e,l)=>{let d=!1,n=l(t,e);for(;n;){if(n===t.firstChild){if(d)return;d=!0}const f=n.disabled||n.getAttribute("aria-disabled")==="true";if(!n.hasAttribute("tabindex")||f)n=l(t,n);else{n.focus();return}}},oo=t=>{const{vertical:e,fixed:l,hideScrollbar:d,scrollableX:n,scrollableY:f,centered:h,scrollButtonsHideMobile:g,classes:b}=t;return At({root:["root",e&&"vertical"],scroller:["scroller",l&&"fixed",d&&"hideScrollbar",n&&"scrollableX",f&&"scrollableY"],list:["list","flexContainer",e&&"flexContainerVertical",e&&"vertical",h&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",g&&"scrollButtonsHideMobile"],scrollableX:[n&&"scrollableX"],hideScrollbar:[d&&"hideScrollbar"]},eo,b)},ro=rt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[{[`& .${Pt.scrollButtons}`]:e.scrollButtons},{[`& .${Pt.scrollButtons}`]:l.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,l.vertical&&e.vertical]}})(Mt(({theme:t})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:e})=>e.vertical,style:{flexDirection:"column"}},{props:({ownerState:e})=>e.scrollButtonsHideMobile,style:{[`& .${Pt.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}))),lo=rt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.scroller,l.fixed&&e.fixed,l.hideScrollbar&&e.hideScrollbar,l.scrollableX&&e.scrollableX,l.scrollableY&&e.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:t})=>t.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:t})=>t.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:t})=>t.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:t})=>t.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),no=rt("div",{name:"MuiTabs",slot:"List",overridesResolver:(t,e)=>{const{ownerState:l}=t;return[e.list,e.flexContainer,l.vertical&&e.flexContainerVertical,l.centered&&e.centered]}})({display:"flex",variants:[{props:({ownerState:t})=>t.vertical,style:{flexDirection:"column"}},{props:({ownerState:t})=>t.centered,style:{justifyContent:"center"}}]}),so=rt("span",{name:"MuiTabs",slot:"Indicator"})(Mt(({theme:t})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:({ownerState:e})=>e.vertical,style:{height:"100%",width:2,right:0}}]}))),ao=rt(je)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Gt={},io=s.forwardRef(function(e,l){const d=Lt({props:e,name:"MuiTabs"}),n=ee(),f=te(),{"aria-label":h,"aria-labelledby":g,action:b,centered:v=!1,children:T,className:y,component:S="div",allowScrollButtonsMobile:w=!1,indicatorColor:H="primary",onChange:E,orientation:I="horizontal",ScrollButtonComponent:G,scrollButtons:D="auto",selectionFollowsFocus:Q,slots:P={},slotProps:W={},TabIndicatorProps:J={},TabScrollButtonProps:z={},textColor:X="primary",value:K,variant:N="standard",visibleScrollbar:lt=!1,...L}=d,k=N==="scrollable",x=I==="vertical",Z=x?"scrollTop":"scrollLeft",nt=x?"top":"left",_=x?"bottom":"right",it=x?"clientHeight":"clientWidth",tt=x?"height":"width",F={...d,component:S,allowScrollButtonsMobile:w,indicatorColor:H,orientation:I,vertical:x,scrollButtons:D,textColor:X,variant:N,visibleScrollbar:lt,fixed:!k,hideScrollbar:k&&!lt,scrollableX:k&&!x,scrollableY:k&&x,centered:v&&!k,scrollButtonsHideMobile:!w},A=oo(F),pt=yt({elementType:P.StartScrollButtonIcon,externalSlotProps:W.startScrollButtonIcon,ownerState:F}),wt=yt({elementType:P.EndScrollButtonIcon,externalSlotProps:W.endScrollButtonIcon,ownerState:F}),[ft,Tt]=s.useState(!1),[O,bt]=s.useState(Gt),[ht,c]=s.useState(!1),[u,C]=s.useState(!1),[B,U]=s.useState(!1),[ct,le]=s.useState({overflow:"hidden",scrollbarWidth:0}),Wt=new Map,V=s.useRef(null),et=s.useRef(null),st={slots:P,slotProps:{indicator:J,scrollButton:z,...W}},zt=()=>{const o=V.current;let r;if(o){const i=o.getBoundingClientRect();r={clientWidth:o.clientWidth,scrollLeft:o.scrollLeft,scrollTop:o.scrollTop,scrollWidth:o.scrollWidth,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}let a;if(o&&K!==!1){const i=et.current.children;if(i.length>0){const m=i[Wt.get(K)];a=m?m.getBoundingClientRect():null}}return{tabsMeta:r,tabMeta:a}},ut=It(()=>{const{tabsMeta:o,tabMeta:r}=zt();let a=0,i;x?(i="top",r&&o&&(a=r.top-o.top+o.scrollTop)):(i=f?"right":"left",r&&o&&(a=(f?-1:1)*(r[i]-o[i]+o.scrollLeft)));const m={[i]:a,[tt]:r?r[tt]:0};if(typeof O[i]!="number"||typeof O[tt]!="number")bt(m);else{const $=Math.abs(O[i]-m[i]),ot=Math.abs(O[tt]-m[tt]);($>=1||ot>=1)&&bt(m)}}),Ct=(o,{animation:r=!0}={})=>{r?_e(Z,V.current,o,{duration:n.transitions.duration.standard}):V.current[Z]=o},Nt=o=>{let r=V.current[Z];x?r+=o:r+=o*(f?-1:1),Ct(r)},Ft=()=>{const o=V.current[it];let r=0;const a=Array.from(et.current.children);for(let i=0;i<a.length;i+=1){const m=a[i];if(r+m[it]>o){i===0&&(r=o);break}r+=m[it]}return r},ne=()=>{Nt(-1*Ft())},se=()=>{Nt(Ft())},[ae,{onChange:vt,...ie}]=at("scrollbar",{className:j(A.scrollableX,A.hideScrollbar),elementType:ao,shouldForwardComponentProp:!0,externalForwardedProps:st,ownerState:F}),ce=s.useCallback(o=>{vt==null||vt(o),le({overflow:null,scrollbarWidth:o})},[vt]),[$t,Ht]=at("scrollButtons",{className:j(A.scrollButtons,z.className),elementType:to,externalForwardedProps:st,ownerState:F,additionalProps:{orientation:I,slots:{StartScrollButtonIcon:P.startScrollButtonIcon||P.StartScrollButtonIcon,EndScrollButtonIcon:P.endScrollButtonIcon||P.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:pt,endScrollButtonIcon:wt}}}),ue=()=>{const o={};o.scrollbarSizeListener=k?p(ae,{...ie,onChange:ce}):null;const a=k&&(D==="auto"&&(ht||u)||D===!0);return o.scrollButtonStart=a?p($t,{direction:f?"right":"left",onClick:ne,disabled:!ht,...Ht}):null,o.scrollButtonEnd=a?p($t,{direction:f?"left":"right",onClick:se,disabled:!u,...Ht}):null,o},Xt=It(o=>{const{tabsMeta:r,tabMeta:a}=zt();if(!(!a||!r)){if(a[nt]<r[nt]){const i=r[Z]+(a[nt]-r[nt]);Ct(i,{animation:o})}else if(a[_]>r[_]){const i=r[Z]+(a[_]-r[_]);Ct(i,{animation:o})}}}),St=It(()=>{k&&D!==!1&&U(!B)});s.useEffect(()=>{const o=oe(()=>{V.current&&ut()});let r;const a=$=>{$.forEach(ot=>{ot.removedNodes.forEach(dt=>{r==null||r.unobserve(dt)}),ot.addedNodes.forEach(dt=>{r==null||r.observe(dt)})}),o(),St()},i=re(V.current);i.addEventListener("resize",o);let m;return typeof ResizeObserver<"u"&&(r=new ResizeObserver(o),Array.from(et.current.children).forEach($=>{r.observe($)})),typeof MutationObserver<"u"&&(m=new MutationObserver(a),m.observe(et.current,{childList:!0})),()=>{o.clear(),i.removeEventListener("resize",o),m==null||m.disconnect(),r==null||r.disconnect()}},[ut,St]),s.useEffect(()=>{const o=Array.from(et.current.children),r=o.length;if(typeof IntersectionObserver<"u"&&r>0&&k&&D!==!1){const a=o[0],i=o[r-1],m={root:V.current,threshold:.99},$=Et=>{c(!Et[0].isIntersecting)},ot=new IntersectionObserver($,m);ot.observe(a);const dt=Et=>{C(!Et[0].isIntersecting)},Ut=new IntersectionObserver(dt,m);return Ut.observe(i),()=>{ot.disconnect(),Ut.disconnect()}}},[k,D,B,T==null?void 0:T.length]),s.useEffect(()=>{Tt(!0)},[]),s.useEffect(()=>{ut()}),s.useEffect(()=>{Xt(Gt!==O)},[Xt,O]),s.useImperativeHandle(b,()=>({updateIndicator:ut,updateScrollButtons:St}),[ut,St]);const[de,pe]=at("indicator",{className:j(A.indicator,J.className),elementType:so,externalForwardedProps:st,ownerState:F,additionalProps:{style:O}}),Ot=p(de,{...pe});let mt=0;const fe=s.Children.map(T,o=>{if(!s.isValidElement(o))return null;const r=o.props.value===void 0?mt:o.props.value;Wt.set(r,mt);const a=r===K;return mt+=1,s.cloneElement(o,{fullWidth:N==="fullWidth",indicator:a&&!ft&&Ot,selected:a,selectionFollowsFocus:Q,onChange:E,textColor:X,value:r,...mt===1&&K===!1&&!o.props.tabIndex?{tabIndex:0}:{}})}),be=o=>{if(o.altKey||o.shiftKey||o.ctrlKey||o.metaKey)return;const r=et.current,a=Oe(r).activeElement;if(a.getAttribute("role")!=="tab")return;let m=I==="horizontal"?"ArrowLeft":"ArrowUp",$=I==="horizontal"?"ArrowRight":"ArrowDown";switch(I==="horizontal"&&f&&(m="ArrowRight",$="ArrowLeft"),o.key){case m:o.preventDefault(),gt(r,a,jt);break;case $:o.preventDefault(),gt(r,a,qt);break;case"Home":o.preventDefault(),gt(r,null,qt);break;case"End":o.preventDefault(),gt(r,null,jt);break}},Bt=ue(),[he,ve]=at("root",{ref:l,className:j(A.root,y),elementType:ro,externalForwardedProps:{...st,...L,component:S},ownerState:F}),[Se,me]=at("scroller",{ref:V,className:A.scroller,elementType:lo,externalForwardedProps:st,ownerState:F,additionalProps:{style:{overflow:ct.overflow,[x?`margin${f?"Left":"Right"}`:"marginBottom"]:lt?void 0:-ct.scrollbarWidth}}}),[xe,ge]=at("list",{ref:et,className:j(A.list,A.flexContainer),elementType:no,externalForwardedProps:st,ownerState:F,getSlotProps:o=>({...o,onKeyDown:r=>{var a;be(r),(a=o.onKeyDown)==null||a.call(o,r)}})});return R(he,{...ve,children:[Bt.scrollButtonStart,Bt.scrollbarSizeListener,R(Se,{...me,children:[p(xe,{"aria-label":h,"aria-labelledby":g,"aria-orientation":I==="vertical"?"vertical":null,role:"tablist",...ge,children:fe}),ft&&Ot]}),Bt.scrollButtonEnd]})}),Y={TABLE:"table",TIMELINE:"timeline"},Qt=365,co=we.forwardRef(({embedded:t=!1,onEventsUpdate:e,hideBackButton:l=!1,autoScrollToNextKey:d=null,compactMode:n=!1},f)=>{const h=ee(),g=Yt(h.breakpoints.down("sm"));Yt(h.breakpoints.up("md"));const b=Te(),[v,T]=Ce(),{eventFilters:y,newsSource:S,selectedTimezone:w}=Be(),{user:H}=Ee(),E=s.useCallback(()=>{const{year:c,month:u,day:C}=Ae(w),B=Kt(w,c,u,C),U=Kt(w,c,u,C,{endOfDay:!0});return{startDate:B,endDate:U}},[w]),[I,G]=s.useState(v.get("view")||Y.TIMELINE),[D,Q]=s.useState([]),[P,W]=s.useState(!0),[J,z]=s.useState(null),[X,K]=s.useState(null),[N,lt]=s.useState(0),[L,k]=s.useState(()=>{const c=v.get("startDate"),u=v.get("endDate");return{startDate:c?new Date(c):y.startDate||null,endDate:u?new Date(u):y.endDate||null,impacts:y.impacts||[],eventTypes:y.eventTypes||[],currencies:y.currencies||[]}});s.useEffect(()=>{const c=v.get("view");c&&[Y.TABLE,Y.TIMELINE].includes(c)&&G(c)},[v]),s.useEffect(()=>{if(!L.startDate||!L.endDate){const{startDate:c,endDate:u}=E(),C={...L,startDate:c,endDate:u};k(C),x(C)}else x()},[]),s.useEffect(()=>{L.startDate&&L.endDate&&x()},[S]);const x=s.useCallback(async(c=null)=>{const u=c||L;if(!u.startDate||!u.endDate){W(!1),z("Please select a date range to view events.");return}const C=Math.ceil((u.endDate-u.startDate)/(1e3*60*60*24));if(C>Qt){z(`Date range cannot exceed ${Qt} days (1 year). Current range: ${C} days.`),W(!1);return}W(!0),z(null);try{const B=await Me(u.startDate,u.endDate,{source:S,impacts:u.impacts,eventTypes:u.eventTypes,currencies:u.currencies});if(B.success){const U=We(B.data),ct=new Date;Q(U),K(ct),lt(U.length),e&&e(U.length,ct)}else console.error("❌ [EventsPage] Failed to load events:",B.error),z(B.error||"Failed to load events"),Q([])}catch(B){console.error("❌ Error fetching events:",B),z(B.message||"An unexpected error occurred"),Q([])}finally{W(!1)}},[L,S]),Z=s.useCallback(c=>{if(k(c),!t){const u=new URLSearchParams(v);c.startDate&&u.set("startDate",c.startDate.toISOString()),c.endDate&&u.set("endDate",c.endDate.toISOString()),T(u,{replace:!0})}},[t,v,T]),nt=s.useCallback(c=>{x(c)},[x]),_=s.useCallback(async()=>{const{invalidateCache:c}=await Ie(async()=>{const{invalidateCache:U}=await import("./eventsCache-KuEBt7DE.js");return{invalidateCache:U}},__vite__mapDeps([0,1,2]));c(S);const{startDate:u,endDate:C}=E(),B={...L,startDate:u,endDate:C};k(B),x(B)},[E,x,L,S]),it=s.useCallback(c=>{lt(c),e&&e(c,X||new Date)},[e,X]);s.useImperativeHandle(f,()=>({handleRefresh:_}),[_]);const tt=s.useCallback((c,u)=>{if(G(u),!t){const C=new URLSearchParams(v);C.set("view",u),T(C,{replace:!0})}},[t,v,T]),F=s.useCallback(()=>{b("/")},[b]),A=t?Y.TIMELINE:I,pt=A===Y.TIMELINE&&N||D.length,wt=n?{xs:1.25,sm:1.75}:{xs:2,sm:3},ft={},Tt=n?0:"auto",O="auto",bt=n?"100vh":"none",ht=n?"auto":"visible";return R(q,{sx:{minHeight:t?"auto":"100vh",height:"auto",bgcolor:"background.default",pt:t?{xs:1.5,sm:2}:0,pb:t?0:4,display:t?"flex":"block",flexDirection:t?"column":"initial",overflow:t?"hidden":"visible"},children:[!t&&p(xt,{elevation:0,sx:{bgcolor:"primary.main",color:"primary.contrastText",borderRadius:0,borderBottom:`4px solid ${h.palette.primary.dark}`,...ft},children:p(Vt,{maxWidth:"xl",children:p(q,{sx:{display:"flex",flexDirection:"column",gap:1.1,py:wt},children:R(q,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},gap:1.5,flexWrap:"wrap"},children:[!l&&p(ze,{title:"Back to Clock",placement:"bottom",children:p(De,{onClick:F,sx:{color:"primary.contrastText","&:hover":{bgcolor:Pe("#fff",.1)}},children:p(ke,{})})}),R(q,{sx:{flex:1,minWidth:0},children:[p(Dt,{variant:"h4",sx:{fontWeight:800,fontSize:n?{xs:"1.35rem",sm:"1.6rem"}:{xs:"1.6rem",sm:"2rem"},letterSpacing:.2},children:"Economic Events"}),R(q,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",mt:.5},children:[!P&&pt>0&&R(Dt,{variant:"subtitle1",sx:{fontWeight:700,fontSize:{xs:"1rem",sm:"1.05rem"}},children:[pt.toLocaleString()," Events"]}),X&&R(Dt,{variant:"caption",sx:{opacity:.9,fontSize:n?{xs:"0.75rem",sm:"0.82rem"}:{xs:"0.78rem",sm:"0.85rem"}},children:["Updated: ",X.toLocaleString()]})]})]})]})})})}),R(q,{component:t?"div":Vt,...!t&&{maxWidth:"xl"},sx:{mt:t?0:n?1.5:3,px:t?{xs:1.5,sm:2}:n?{xs:1,sm:1.5}:0,pb:t?2:0,flex:t?1:"initial",overflow:t?"auto":"visible",display:"flex",flexDirection:"column",gap:t||n?1.5:3,position:"relative"},children:[p(xt,{elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:n?0:2,flexShrink:0,position:n?"sticky":"static",top:Tt,zIndex:n?1180:"auto",bgcolor:"background.paper",maxHeight:bt,overflow:ht,boxShadow:n?h.shadows[3]:"none",width:t?"100%":n?"100vw":"auto",maxWidth:t?"100%":n?"100vw":"none",ml:n?"calc(50% - 50vw)":0,mr:n?"calc(50% - 50vw)":0},children:p(Ne,{filters:L,onFiltersChange:Z,onApply:nt,loading:P,timezone:w,newsSource:S,actionOffset:t?H?56:12:0})}),!t&&p(xt,{elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:2,overflow:"hidden",flexShrink:0,position:"static",top:O,zIndex:"auto",bgcolor:"background.paper"},children:R(io,{value:I,onChange:tt,variant:g?"fullWidth":"standard",sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{minHeight:{xs:56,sm:48},fontSize:{xs:"0.875rem",sm:"0.9375rem"},fontWeight:600,textTransform:"none"}},children:[p(_t,{value:Y.TIMELINE,label:"Timeline",icon:p(Fe,{}),iconPosition:"start"}),p(_t,{value:Y.TABLE,label:"Table",icon:p($e,{}),iconPosition:"start"})]})}),R(q,{sx:{flex:t?1:"initial",overflow:t?"hidden":"visible",display:"flex",flexDirection:"column",minHeight:t?0:"auto"},children:[A===Y.TIMELINE&&p(xt,{elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:2,overflow:t?"hidden":"auto",flex:t?1:"initial",display:t?"flex":"block",flexDirection:"column"},children:p(He,{events:D,loading:P,timezone:w,onVisibleCountChange:it,autoScrollToNextKey:d})}),!t&&A===Y.TABLE&&p(q,{sx:{flex:t?1:"initial",overflow:t?"hidden":"visible",display:t?"flex":"block",flexDirection:"column"},children:p(Xe,{events:D,loading:P,error:J,timezone:w,onRefresh:_})})]})]})]})});co.displayName="EventsPage";export{co as default};
