import{r as y,p as e,o as N,A as W,q as z,aH as G,f as M,s as P,i as j,D as B,U,v as c,P as H,w as m,V as E,Q as O,aw as J,ai as V,a9 as F,al as q}from"./index-CKgUHhcZ.js";import{s as Q,u as _,S as T,B as A,C as D,a as K,E as X}from"./Error-DSFoSfts.js";const Y=G(),Z=Q("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:s}=a;return[o.root,o[`maxWidth${W(String(s.maxWidth))}`],s.fixed&&o.fixed,s.disableGutters&&o.disableGutters]}}),tt=a=>_({props:a,name:"MuiContainer",defaultTheme:Y}),et=(a,o)=>{const s=u=>M(o,u),{classes:d,fixed:h,disableGutters:f,maxWidth:t}=a,n={root:["root",t&&`maxWidth${W(String(t))}`,h&&"fixed",f&&"disableGutters"]};return z(n,s,d)};function ot(a={}){const{createStyledComponent:o=Z,useThemeProps:s=tt,componentName:d="MuiContainer"}=a,h=o(({theme:t,ownerState:n})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}}),({theme:t,ownerState:n})=>n.fixed&&Object.keys(t.breakpoints.values).reduce((u,i)=>{const p=i,l=t.breakpoints.values[p];return l!==0&&(u[t.breakpoints.up(p)]={maxWidth:`${l}${t.breakpoints.unit}`}),u},{}),({theme:t,ownerState:n})=>({...n.maxWidth==="xs"&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},...n.maxWidth&&n.maxWidth!=="xs"&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}}}));return y.forwardRef(function(n,u){const i=s(n),{className:p,component:l="div",disableGutters:w=!1,fixed:k=!1,maxWidth:v="lg",classes:x,...b}=i,r={...i,component:l,disableGutters:w,fixed:k,maxWidth:v},g=et(r,d);return e(h,{as:l,ownerState:r,className:N(g.root,p),ref:u,...b})})}const nt=ot({createStyledComponent:P("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:s}=a;return[o.root,o[`maxWidth${W(String(s.maxWidth))}`],s.fixed&&o.fixed,s.disableGutters&&o.disableGutters]}}),useThemeProps:a=>j({props:a,name:"MuiContainer"})}),at=B(e("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),st=B(e("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),$="economicEventsCalendar";function lt(){const{user:a}=U(),[o,s]=y.useState(!1),[d,h]=y.useState(null),[f,t]=y.useState(null),n=async()=>{s(!0),t(null),h(null);try{console.log("ðŸ“Š Starting export of economic events...");const i=V(F,$),p=await q(i);if(p.empty)throw new Error("No events found in the collection");const l=p.docs.map(b=>{var g,R,C,I,S,L;const r=b.data();return{id:b.id,...r,date:((R=(g=r.date)==null?void 0:g.toDate)==null?void 0:R.call(g).toISOString())||r.date,createdAt:((I=(C=r.createdAt)==null?void 0:C.toDate)==null?void 0:I.call(C).toISOString())||r.createdAt,updatedAt:((L=(S=r.updatedAt)==null?void 0:S.toDate)==null?void 0:L.call(S).toISOString())||r.updatedAt}});console.log(`âœ… Exported ${l.length} events`);const w=JSON.stringify(l,null,2),k=new Blob([w],{type:"application/json"}),v=URL.createObjectURL(k),x=document.createElement("a");x.href=v,x.download=`economic-events-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(v),h({success:!0,count:l.length,timestamp:new Date().toISOString()})}catch(i){console.error("âŒ Export failed:",i),t(i.message||"Failed to export events")}finally{s(!1)}};return e(nt,{maxWidth:"md",sx:{py:8},children:c(H,{elevation:3,sx:{p:4},children:[c(T,{direction:"row",spacing:2,alignItems:"center",sx:{mb:4},children:[e(A,{variant:"outlined",startIcon:e(at,{}),onClick:()=>{window.location.hash="/"},sx:{minWidth:"auto"},children:"Back"}),e(m,{variant:"h4",component:"h1",sx:{flexGrow:1},children:"Export Economic Events"})]}),a&&e(E,{severity:"info",sx:{mb:3},children:c(m,{variant:"body2",children:["Logged in as: ",e("strong",{children:a.email})]})}),c(m,{variant:"body1",color:"text.secondary",paragraph:!0,children:["Export all economic events from the ",e("code",{children:$})," collection to a JSON file. This will download all events with their metadata including dates, currencies, impact levels, and event details."]}),e(O,{sx:{my:4},children:e(A,{variant:"contained",color:"primary",size:"large",startIcon:o?e(J,{size:20,color:"inherit"}):e(st,{}),onClick:n,disabled:o,fullWidth:!0,sx:{py:1.5},children:o?"Exporting...":"Export All Events"})}),d&&c(E,{severity:"success",icon:e(K,{}),sx:{mb:2},children:[e(m,{variant:"subtitle2",gutterBottom:!0,children:"Export completed successfully!"}),c(T,{direction:"row",spacing:1,sx:{mt:1},children:[e(D,{label:`${d.count.toLocaleString()} events`,size:"small",color:"success"}),e(D,{label:new Date(d.timestamp).toLocaleString(),size:"small",variant:"outlined"})]})]}),f&&c(E,{severity:"error",icon:e(X,{}),onClose:()=>t(null),children:[e(m,{variant:"subtitle2",gutterBottom:!0,children:"Export failed"}),e(m,{variant:"body2",children:f})]}),e(O,{sx:{mt:4,p:2,bgcolor:"background.default",borderRadius:1},children:c(m,{variant:"caption",color:"text.secondary",display:"block",children:[e("strong",{children:"Note:"})," The exported JSON file will contain all fields from Firestore, with Timestamps converted to ISO 8601 strings for compatibility. The file will be automatically downloaded to your default downloads folder."]})})]})})}export{lt as default};
